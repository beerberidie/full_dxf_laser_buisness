{% extends "base.html" %}

{% block title %}{% if item %}Edit{% else %}New{% endif %} Inventory Item - Laser OS{% endblock %}

{% block content %}
<div class="page-header">
    <h1>{% if item %}‚úèÔ∏è Edit Inventory Item{% else %}‚ûï New Inventory Item{% endif %}</h1>
</div>

<div class="card">
    <div class="card-body">
        <form method="POST">
            <div class="grid grid-2">
                <div>
                    <label for="item_code">Item Code *</label>
                    <input type="text" id="item_code" name="item_code" value="{{ item.item_code if item else '' }}" required {% if item %}readonly{% endif %}>
                    <small class="text-muted">Unique identifier for this item</small>
                </div>

                <div>
                    <label for="name">Name *</label>
                    <input type="text" id="name" name="name" value="{{ item.name if item else '' }}" required>
                </div>

                <div>
                    <label for="category">Category *</label>
                    <select id="category" name="category" required>
                        <option value="">Select Category</option>
                        {% for cat in categories %}
                        <option value="{{ cat }}" {% if item and item.category == cat %}selected{% endif %}>{{ cat }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div>
                    <label for="unit">Unit *</label>
                    <select id="unit" name="unit" required>
                        <option value="">Select Unit</option>
                        {% for u in units %}
                        <option value="{{ u }}" {% if item and item.unit == u %}selected{% endif %}>{{ u }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div>
                    <label for="material_type">Material Type</label>
                    <input type="text" id="material_type" name="material_type" value="{{ item.material_type if item else '' }}">
                    <small class="text-muted">e.g., Mild Steel, Stainless Steel</small>
                </div>

                <div>
                    <label for="thickness">Thickness (mm)</label>
                    <input type="number" step="0.001" id="thickness" name="thickness" value="{{ item.thickness if item else '' }}">
                </div>

                {% if not item %}
                <div>
                    <label for="quantity_on_hand">Initial Quantity</label>
                    <input type="number" step="0.001" id="quantity_on_hand" name="quantity_on_hand" value="0">
                </div>
                {% endif %}

                <div>
                    <label for="reorder_level">Reorder Level</label>
                    <input type="number" step="0.001" id="reorder_level" name="reorder_level" value="{{ item.reorder_level if item else '' }}">
                    <small class="text-muted">Alert when stock falls below this level</small>
                </div>

                <div>
                    <label for="reorder_quantity">Reorder Quantity</label>
                    <input type="number" step="0.001" id="reorder_quantity" name="reorder_quantity" value="{{ item.reorder_quantity if item else '' }}">
                </div>

                <div>
                    <label for="unit_cost">Unit Cost ($)</label>
                    <input type="number" step="0.01" id="unit_cost" name="unit_cost" value="{{ item.unit_cost if item else '' }}">
                </div>

                <div>
                    <label for="supplier_name">Supplier Name</label>
                    <input type="text" id="supplier_name" name="supplier_name" value="{{ item.supplier_name if item else '' }}">
                </div>

                <div>
                    <label for="supplier_contact">Supplier Contact</label>
                    <input type="text" id="supplier_contact" name="supplier_contact" value="{{ item.supplier_contact if item else '' }}">
                </div>

                <div>
                    <label for="location">Storage Location</label>
                    <input type="text" id="location" name="location" value="{{ item.location if item else '' }}">
                </div>
            </div>

            <div style="margin-top: 1rem;">
                <label for="notes">Notes</label>
                <textarea id="notes" name="notes" rows="3">{{ item.notes if item else '' }}</textarea>
            </div>

            <div class="form-actions" style="margin-top: 2rem;">
                <button type="submit" class="btn btn-primary">üíæ Save</button>
                <a href="{% if item %}{{ url_for('inventory.detail', id=item.id) }}{% else %}{{ url_for('inventory.index') }}{% endif %}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}

